---
// CopyButton.astro
const { text } = Astro.props;
---

<script>
  function setupCopyTextListeners() {
    const copyTextElements = document.querySelectorAll('.copy-text');

    copyTextElements.forEach((element) => {
      const el = element as HTMLElement; // Explicitly cast to HTMLElement
      const originalText = el.innerText;
      const copyText = el.dataset.copyText;

      el.addEventListener('click', () => {
        navigator.clipboard.writeText(copyText || '').then(() => {
          el.innerText = 'Command copied!';
          setTimeout(() => {
            el.innerText = originalText;
          }, 800);
        });
      });
    });
  }

  // Re-run setup on page load or hydration
  document.addEventListener('astro:load', setupCopyTextListeners);
  document.addEventListener('astro:visible', setupCopyTextListeners);
</script>

